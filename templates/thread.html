<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Histórico da Thread</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      padding: 20px;
      background-color: #f9f9f9;
      font-family: 'Segoe UI', sans-serif;
    }
    .msg {
      background: white;
      border-radius: 10px;
      box-shadow: 0 0 5px rgba(0,0,0,0.05);
      padding: 15px 20px;
      margin-bottom: 15px;
    }
    .msg.original {
      border-left: 5px solid #0d6efd;
    }
    .msg .user {
      font-weight: 600;
      color: #0d6efd;
    }
    .msg .text {
      margin-top: 5px;
      white-space: pre-wrap;
    }
    .msg .timestamp {
      font-size: 0.8rem;
      color: #888;
      margin-top: 5px;
    }
  </style>
</head>
<body>

  <h4 class="mb-4">Histórico da Thread</h4>

  {% if mensagens %}
    {% for m in mensagens %}
      <div class="msg {% if loop.index0 == 0 %}original{% endif %}">
        <div class="user">{{ get_real_name(m.user) or m.user or 'Sistema' }}</div>
        <div class="text">{{ m.text }}</div>
        <div class="timestamp">{{ m.ts }}</div>
      </div>
    {% endfor %}
  {% else %}
    <div class="alert alert-warning">Nenhuma mensagem foi encontrada nesta thread.</div>
  {% endif %}

</body>
</html>
